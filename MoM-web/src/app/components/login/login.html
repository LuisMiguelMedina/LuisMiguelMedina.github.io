<div class="terminal-page">
  <div class="container d-flex align-items-center justify-content-center min-vh-100">
    <div class="terminal-window" style="max-width: 500px; width: 100%;">
      <!-- Terminal Header -->
      <div class="terminal-header">
        <div class="terminal-controls">
          <span class="terminal-btn terminal-btn-close"></span>
          <span class="terminal-btn terminal-btn-minimize"></span>
          <span class="terminal-btn terminal-btn-maximize"></span>
        </div>
        <span class="terminal-title">ADMIN SYSTEM ACCESS</span>
        <div style="width: 52px;"></div>
      </div>

      <!-- Terminal Body -->
      <div class="terminal-body">
        <!-- ASCII Logo usando divs separados para cada línea -->
        <div class="ascii-logo">
          <div>██████╗ ██╗███╗ ███╗███████╗███╗ ██╗███████╗██╗ ██████╗ ███╗ ██╗ ██████╗ </div>
          <div>██╔══██╗██║████╗ ████║██╔════╝████╗ ██║██╔════╝██║██╔═══██╗████╗ ██║ ╚════██╗</div>
          <div>██║ ██║██║██╔████╔██║█████╗ ██╔██╗ ██║███████╗██║██║ ██║██╔██╗ ██║ █████╔╝</div>
          <div>██║ ██║██║██║╚██╔╝██║██╔══╝ ██║╚██╗██║╚════██║██║██║ ██║██║╚██╗██║ ██╔═══╝ </div>
          <div>██████╔╝██║██║ ╚═╝ ██║███████╗██║ ╚████║███████║██║╚██████╔╝██║ ╚████║ ███████╗</div>
          <div>╚═════╝ ╚═╝╚═╝ ╚═╝╚══════╝╚═╝ ╚═══╝╚══════╝╚═╝ ╚═════╝ ╚═╝ ╚═══╝ ╚══════╝</div>
        </div>

        <!-- Locked Screen -->
        @if (isLocked) {
        <div class="terminal-locked">
          <div class="locked-icon">🔒</div>
          <div class="locked-message">SYSTEM LOCKDOWN</div>
          <div class="locked-submessage">Demasiados intentos de acceso no autorizados</div>
          <div class="locked-submessage mt-2" style="color: var(--terminal-amber);">
            Contacte al administrador del sistema
          </div>
        </div>
        } @else {
        <!-- Attempt Counter - Cuadros que desaparecen -->
        <div class="attempt-counter">
          <div class="attempt-label">Security Tokens</div>
          <div class="attempt-blocks">
            @for (attempt of visibleAttempts; track $index) {
            <div class="attempt-block active" [class.fade-out]="attempt.fadeOut"></div>
            }
          </div>
        </div>

        <!-- Login Form -->
        <form (ngSubmit)="onSubmit()" #loginForm="ngForm">
          <div class="terminal-input-group">
            <label class="terminal-label" for="username">ADMIN ID</label>
            <input class="terminal-input terminal-cursor" [class.input-error]="showError" type="text" id="username"
              name="username" [(ngModel)]="loginData.email" required autocomplete="off">
          </div>

          <div class="terminal-input-group">
            <label class="terminal-label" for="password">ACCESS KEY</label>
            <input class="terminal-input terminal-cursor" [class.input-error]="showError" type="password" id="password"
              name="password" [(ngModel)]="loginData.password" required autocomplete="off">
          </div>

          <button class="terminal-submit" type="submit" 
                  [disabled]="isLoading || !loginForm.valid || visibleAttempts.length === 0"
                  [class.disabled-locked]="visibleAttempts.length === 0">
            @if (isLoading) {
            <span class="terminal-loading">
              <span></span>
              <span></span>
              <span></span>
            </span>
            AUTHENTICATING...
            } @else {
            INITIALIZE SESSION
            }
          </button>
        </form>

        <!-- Error Message -->
        @if (errorMessage) {
        <div class="terminal-error">
          {{ errorMessage }}
        </div>
        }
        }

        <!-- Footer -->
        <div class="terminal-footer">
          <span>DIMENSION-2 ADMIN CONSOLE v2.4.1</span>
        </div>
      </div>
    </div>
  </div>
</div>