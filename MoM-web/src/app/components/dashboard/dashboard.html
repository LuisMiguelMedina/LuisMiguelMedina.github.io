<!-- Page Heading -->
<div class="d-sm-flex justify-content-between align-items-center mb-4">
  <div>
    <h3 class="text-dark mb-0">Dashboard</h3>
    @if (userProfile()) {
      <small class="text-muted">Bienvenido, {{ userProfile()?.firstName }}!</small>
    }
    @if (onlineUsers() > 0) {
      <div class="mt-1">
        <small class="text-success">
          <i class="fas fa-circle me-1"></i>
          {{ onlineUsers() }} usuarios en l√≠nea
        </small>
      </div>
    }
  </div>
  <button class="btn btn-primary btn-sm d-none d-sm-inline-block" type="button">
    <i class="fas fa-download fa-sm text-white-50"></i>&nbsp;Generate Report
  </button>
</div>

<!-- Content Row - Stats Cards -->
<div class="row">
  <!-- Earnings (Monthly) Card -->
  <div class="col-md-6 col-xl-3 mb-4">
    <div class="card shadow py-2 border-left-primary">
      <div class="card-body">
        <div class="row g-0 align-items-center">
          <div class="col me-2">
            <div class="text-uppercase text-primary mb-1 fw-bold text-xs">
              <span>Earnings (monthly)</span>
            </div>
            <div class="text-dark mb-0 fw-bold h5">
              @if (dashboardData()) {
                <span>${{ dashboardData()?.revenue | number:'1.0-0' }}</span>
              } @else {
                <span class="text-muted">Cargando...</span>
              }
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-calendar fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Earnings (Annual) Card -->
  <div class="col-md-6 col-xl-3 mb-4">
    <div class="card shadow py-2 border-left-success">
      <div class="card-body">
        <div class="row g-0 align-items-center">
          <div class="col me-2">
            <div class="text-uppercase text-success mb-1 fw-bold text-xs">
              <span>Earnings (annual)</span>
            </div>
            <div class="text-dark mb-0 fw-bold h5">
              @if (dashboardData() && dashboardData()!.revenue) {
                <span>${{ (dashboardData()!.revenue * 5) | number:'1.0-0' }}</span>
              } @else {
                <span class="text-muted">Cargando...</span>
              }
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-dollar-sign fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Tasks Card -->
  <div class="col-md-6 col-xl-3 mb-4">
    <div class="card shadow py-2 border-left-info">
      <div class="card-body">
        <div class="row g-0 align-items-center">
          <div class="col me-2">
            <div class="text-uppercase text-info mb-1 fw-bold text-xs">
              <span>Tasks</span>
            </div>
            <div class="row g-0 align-items-center">
              <div class="col-auto">
                <div class="text-dark me-3 mb-0 fw-bold h5">
                  @if (dashboardData()) {
                    <span>{{ dashboardData()!.growth }}%</span>
                  } @else {
                    <span>--</span>
                  }
                </div>
              </div>
              <div class="col">
                <div class="progress progress-sm">
                  @if (dashboardData()) {
                    <div
                      class="progress-bar bg-info"
                      [style.width.%]="dashboardData()!.growth"
                      [attr.aria-valuenow]="dashboardData()!.growth"
                      aria-valuemin="0"
                      aria-valuemax="100">
                      <span class="visually-hidden">{{ dashboardData()!.growth }}%</span>
                    </div>
                  }
                </div>
              </div>
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pending Requests Card -->
  <div class="col-md-6 col-xl-3 mb-4">
    <div class="card shadow py-2 border-left-warning">
      <div class="card-body">
        <div class="row g-0 align-items-center">
          <div class="col me-2">
            <div class="text-uppercase text-warning mb-1 fw-bold text-xs">
              <span>Pending Requests</span>
            </div>
            <div class="text-dark mb-0 fw-bold h5">
              @if (dashboardData()) {
                <span>{{ dashboardData()!.sessions }}</span>
              } @else {
                <span>--</span>
              }
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-comments fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Content Row - Charts and Activity -->
<div class="row">
  <!-- Area Chart -->
  <div class="col-lg-7 col-xl-8">
    <div class="card shadow mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="text-primary m-0 fw-bold">Earnings Overview</h6>
        <div class="dropdown no-arrow">
          <button class="btn btn-link btn-sm dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false">
            <i class="fas fa-ellipsis-v text-gray-400"></i>
          </button>
          <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
            <p class="text-center dropdown-header">Chart Options</p>
            <a class="dropdown-item" href="#">View Details</a>
            <a class="dropdown-item" href="#">Export Data</a>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="chart-area">
          <div class="d-flex justify-content-center align-items-center" style="height: 320px;">
            <div class="text-center">
              <i class="fas fa-chart-area fa-3x text-gray-300 mb-3"></i>
              <p class="text-gray-500">Chart will be implemented here</p>
              <small class="text-muted">Using Chart.js or similar library</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pie Chart -->
  <div class="col-lg-5 col-xl-4">
    <div class="card shadow mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h6 class="text-primary m-0 fw-bold">Revenue Sources</h6>
        <div class="dropdown no-arrow">
          <button class="btn btn-link btn-sm dropdown-toggle"
                  type="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false">
            <i class="fas fa-ellipsis-v text-gray-400"></i>
          </button>
          <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
            <p class="text-center dropdown-header">Chart Options</p>
            <a class="dropdown-item" href="#">View Details</a>
            <a class="dropdown-item" href="#">Export Data</a>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div class="chart-pie pt-4 pb-2">
          <div class="d-flex justify-content-center align-items-center" style="height: 245px;">
            <div class="text-center">
              <i class="fas fa-chart-pie fa-3x text-gray-300 mb-3"></i>
              <p class="text-gray-500">Pie chart placeholder</p>
              <small class="text-muted">Revenue breakdown by source</small>
            </div>
          </div>
        </div>
        <div class="mt-4 text-center small">
          <span class="me-2">
            <i class="fas fa-circle text-primary"></i> Direct
          </span>
          <span class="me-2">
            <i class="fas fa-circle text-success"></i> Social
          </span>
          <span class="me-2">
            <i class="fas fa-circle text-info"></i> Referral
          </span>
        </div>
      </div>
    </div>

    <!-- Recent Activity -->
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="text-primary m-0 fw-bold">Recent Activity</h6>
      </div>
      <div class="card-body">
        <div class="timeline">
          @for (activity of recentActivity; track activity.timestamp) {
            <div class="d-flex align-items-center mb-3">
              <div class="me-3">
                <div class="bg-primary icon-circle">
                  <i class="fas fa-file-alt text-white"></i>
                </div>
              </div>
              <div class="flex-grow-1">
                <div class="small text-gray-500">{{ activity.timestamp | date:'short' }}</div>
                <p class="mb-0">{{ activity.description }}</p>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
