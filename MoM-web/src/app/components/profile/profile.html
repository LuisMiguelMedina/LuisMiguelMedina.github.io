<div class="profile-container">
    <!-- Header Section -->
    <div class="profile-header">
        <div class="agent-avatar">
            <div class="avatar-ring" [style.border-color]="getLevelColor()">
                <div class="avatar-inner">
                    <i class="fas fa-user-secret"></i>
                </div>
            </div>
            <div class="status-indicator online"></div>
        </div>

        <div class="agent-info">
            <h1 class="agent-name">{{ adminName() }}</h1>
            <div class="agent-code">@{{ adminUsername() }}</div>
            <div class="agent-role" [style.color]="getLevelColor()">
                <i class="fas fa-shield-alt"></i>
                {{ adminRole() }}
            </div>
        </div>

        <div class="level-badge" [style.background]="getLevelColor()">
            <span class="level-number">{{ adminLevel() }}</span>
            <span class="level-label">{{ getLevelName() }}</span>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="tab-navigation">
        <button class="tab-btn" [class.active]="activeTab === 'overview'" (click)="switchTab('overview')">
            <i class="fas fa-tachometer-alt"></i>
            Resumen
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'info'" (click)="switchTab('info')">
            <i class="fas fa-id-card"></i>
            Información
        </button>
        @if (isKTH01()) {
        <button class="tab-btn hr-tab" [class.active]="activeTab === 'hr'" (click)="switchTab('hr')">
            <i class="fas fa-file-alt"></i>
            Expediente
        </button>
        }
    </div>

    <!-- OVERVIEW TAB -->
    @if (activeTab === 'overview') {
    <div class="tab-content overview-tab">
        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-terminal"></i>
                </div>
                <div class="stat-content">
                    <span class="stat-value">{{ stats.sessionsTotal }}</span>
                    <span class="stat-label">Sesiones Totales</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon clearance">
                    <i class="fas fa-id-badge"></i>
                </div>
                <div class="stat-content">
                    <span class="stat-value">{{ stats.clearanceCode }}</span>
                    <span class="stat-label">Código de Acceso</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon dimension">
                    <i class="fas fa-globe"></i>
                </div>
                <div class="stat-content">
                    <span class="stat-value small">{{ stats.assignedDimension }}</span>
                    <span class="stat-label">Dimensiones Asignadas</span>
                </div>
            </div>
        </div>

        <!-- Info Panels Row -->
        <div class="panels-row">
            <!-- Mission Status Panel -->
            <div class="panel mission-panel">
                <div class="panel-header">
                    <i class="fas fa-satellite-dish"></i>
                    <span>ESTADO DE MISIÓN</span>
                </div>
                <div class="panel-body">
                    <div class="mission-status">
                        <div class="status-dot pulse"></div>
                        <span>{{ stats.missionStatus }}</span>
                    </div>
                    <div class="mission-detail">
                        <span class="detail-label">Último Acceso:</span>
                        <span class="detail-value">{{ stats.lastAccess }}</span>
                    </div>
                    <div class="mission-detail">
                        <span class="detail-label">Conexión:</span>
                        <span class="detail-value success">SEGURA</span>
                    </div>
                    <div class="mission-detail">
                        <span class="detail-label">Encriptación:</span>
                        <span class="detail-value">AES-256</span>
                    </div>
                </div>
            </div>

            <!-- Activity Log Panel -->
            <div class="panel activity-panel">
                <div class="panel-header">
                    <i class="fas fa-list-alt"></i>
                    <span>REGISTRO DE ACTIVIDAD</span>
                </div>
                <div class="panel-body">
                    <div class="activity-list">
                        @for (log of activityLog; track log.timestamp) {
                        <div class="activity-item" [class]="log.status">
                            <span class="activity-time">{{ log.timestamp }}</span>
                            <span class="activity-action">{{ log.action }}</span>
                            <span class="activity-status">
                                @if (log.status === 'success') {
                                <i class="fas fa-check-circle"></i>
                                } @else if (log.status === 'warning') {
                                <i class="fas fa-exclamation-triangle"></i>
                                } @else {
                                <i class="fas fa-info-circle"></i>
                                }
                            </span>
                        </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    }

    <!-- INFO TAB -->
    @if (activeTab === 'info') {
    <div class="tab-content info-tab">
        <div class="info-grid">
            <!-- Codename Card -->
            <div class="info-card codename-card">
                <div class="info-icon">
                    <i class="fas fa-fingerprint"></i>
                </div>
                <div class="info-label">NOMBRE CLAVE</div>
                <div class="info-value large">{{ adminBio.codename }}</div>
            </div>

            <!-- Origin Card -->
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="info-label">ORIGEN</div>
                <div class="info-value">{{ adminBio.origin }}</div>
            </div>

            <!-- Specialty Card -->
            <div class="info-card">
                <div class="info-icon">
                    <i class="fas fa-star"></i>
                </div>
                <div class="info-label">ESPECIALIDAD</div>
                <div class="info-value">{{ adminBio.specialty }}</div>
            </div>
        </div>

        <!-- Backstory Panel -->
        <div class="panel backstory-panel">
            <div class="panel-header">
                <i class="fas fa-book"></i>
                <span>EXPEDIENTE DEL AGENTE</span>
            </div>
            <div class="panel-body">
                <p class="backstory-text">{{ adminBio.backstory }}</p>
                <div class="agent-quote">
                    <i class="fas fa-quote-left"></i>
                    {{ adminBio.quote }}
                    <i class="fas fa-quote-right"></i>
                </div>
            </div>
        </div>

        <!-- Classification Badge -->
        <div class="classification-footer">
            <div class="classification-stamp" [style.border-color]="getLevelColor()" [style.color]="getLevelColor()">
                <span>CLASIFICADO</span>
                <span class="level-text">REQUIERE NIVEL {{ adminLevel() }} DE ACCESO</span>
            </div>
        </div>
    </div>
    }

    <!-- HR FILE TAB (Only for KTH01) -->
    @if (activeTab === 'hr' && isKTH01()) {
    <div class="tab-content hr-file-tab">
        <!-- Classification Header -->
        <div class="hr-classification-banner">
            <i class="fas fa-lock"></i>
            <span class="classification-text">CLASIFICACIÓN: Interno — Solo personal autorizado</span>
            <span class="update-cycle">Última actualización: Ciclo 21.7</span>
        </div>

        <!-- General Data Section -->
        <div class="hr-section">
            <div class="hr-section-header">
                <i class="fas fa-user-circle"></i>
                <h2>Datos Generales</h2>
            </div>
            <div class="hr-data-table">
                <div class="hr-row">
                    <span class="hr-label">Designación</span>
                    <span class="hr-value highlight">Katherine M.2 (Mark 2)</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Puesto actual</span>
                    <span class="hr-value">Subdirectora Asistente — Golden 21</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Departamento</span>
                    <span class="hr-value">Operaciones Dimensionales / Ingeniería Táctica</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Base de operaciones</span>
                    <span class="hr-value">Ciudadela Zarek</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Estatus</span>
                    <span class="hr-value status-active"><i class="fas fa-circle"></i> Activa</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Tipo biológico</span>
                    <span class="hr-value">Androide — Chasis militar sintético completo</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Variante</span>
                    <span class="hr-value special">Zarek Ultra (Reconstrucción Sintética)</span>
                </div>
            </div>
        </div>

        <!-- Professional History -->
        <div class="hr-section">
            <div class="hr-section-header">
                <i class="fas fa-briefcase"></i>
                <h2>Historial Profesional</h2>
            </div>
            <div class="hr-content-block">
                <p class="hr-paragraph">
                    Katherine M.2 fue comisionada como sucesora operativa de <strong>Katherine Zarek</strong> 
                    (fallecida en acción). Su perfil combina experiencia táctica de nivel Elite con capacidades 
                    administrativas avanzadas.
                </p>
                <p class="hr-paragraph">
                    Previo a su asignación como subdirectora asistente de Golden 21, completó todas las evaluaciones 
                    de combate y aptitud estratégica requeridas, superando los benchmarks establecidos por su predecesora.
                </p>
                <div class="hr-competencies">
                    <h4>Áreas de competencia:</h4>
                    <ul>
                        <li><i class="fas fa-crosshairs"></i> Operaciones militares y comando táctico</li>
                        <li><i class="fas fa-atom"></i> Estabilización dimensional</li>
                        <li><i class="fas fa-cogs"></i> Ingeniería de combate</li>
                        <li><i class="fas fa-tasks"></i> Gestión de proyectos de alta prioridad</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Current Assignment -->
        <div class="hr-section project-section">
            <div class="hr-section-header">
                <i class="fas fa-project-diagram"></i>
                <h2>Asignación Actual: Proyecto Golden 21</h2>
            </div>
            <div class="hr-content-block">
                <p class="hr-paragraph">
                    Asiste en la coordinación de la iniciativa de reconstrucción y estabilización de los fragmentos 
                    dimensionales derivados de los experimentos temporales en la Dimensión 21.
                </p>
                <div class="project-phase">
                    <span class="phase-label">Estado del proyecto:</span>
                    <span class="phase-badge">Fase 2 (Echo)</span>
                </div>
                <div class="classified-notice">
                    <i class="fas fa-shield-alt"></i>
                    <span>Detalles clasificados disponibles bajo solicitud con autorización Nivel 4 o superior.</span>
                </div>
            </div>
        </div>

        <!-- Performance Evaluation -->
        <div class="hr-section">
            <div class="hr-section-header">
                <i class="fas fa-chart-line"></i>
                <h2>Evaluación de Desempeño</h2>
            </div>
            <div class="performance-grid">
                <div class="performance-item exceeds">
                    <span class="perf-area">Cumplimiento de misión</span>
                    <span class="perf-rating">Excede expectativas</span>
                    <div class="perf-bar"><div class="perf-fill" style="width: 95%"></div></div>
                </div>
                <div class="performance-item meets">
                    <span class="perf-area">Liderazgo de equipo</span>
                    <span class="perf-rating">Cumple expectativas</span>
                    <div class="perf-bar"><div class="perf-fill" style="width: 75%"></div></div>
                </div>
                <div class="performance-item full">
                    <span class="perf-area">Preparación de combate</span>
                    <span class="perf-rating">Capacidad plena</span>
                    <div class="perf-bar"><div class="perf-fill" style="width: 100%"></div></div>
                </div>
                <div class="performance-item exceeds">
                    <span class="perf-area">Rendimiento administrativo</span>
                    <span class="perf-rating">Excede proyecciones</span>
                    <div class="perf-bar"><div class="perf-fill" style="width: 90%"></div></div>
                </div>
            </div>
        </div>

        <!-- Psychological Notes -->
        <div class="hr-section confidential-section">
            <div class="hr-section-header warning">
                <i class="fas fa-exclamation-triangle"></i>
                <h2>Notas de Seguimiento Psicológico</h2>
                <span class="confidential-badge">CONFIDENCIAL — Acceso restringido</span>
            </div>
            <div class="hr-content-block">
                <p class="hr-paragraph">
                    La empleada presenta un perfil psicológico estable pero bajo monitoreo continuo. Se ha observado 
                    una tendencia hacia la introspección y un temperamento notablemente más reservado de lo esperado 
                    para personal con su historial operativo.
                </p>
                <p class="hr-paragraph">
                    No se reporta degradación en su línea base emocional. No requiere intervención inmediata. 
                    Se recomienda mantener evaluaciones periódicas.
                </p>
                <div class="diagnosis-box">
                    <span class="diagnosis-label">Diagnóstico general:</span>
                    <span class="diagnosis-result">Apta para servicio activo sin restricciones</span>
                </div>
            </div>
        </div>

        <!-- Emergency Contact -->
        <div class="hr-section">
            <div class="hr-section-header">
                <i class="fas fa-phone-alt"></i>
                <h2>Contacto de Emergencia</h2>
            </div>
            <div class="hr-data-table contact-table">
                <div class="hr-row">
                    <span class="hr-label">Mantenimiento técnico</span>
                    <span class="hr-value">División de Ingeniería Sintética, Ciudadela Zarek</span>
                </div>
                <div class="hr-row">
                    <span class="hr-label">Soporte psicológico</span>
                    <span class="hr-value">Unidad de Bienestar - Casos Especiales</span>
                </div>
            </div>
        </div>

        <!-- Document Footer -->
        <div class="hr-document-footer">
            <i class="fas fa-shield-alt"></i>
            <p>Este documento es propiedad de la Ciudadela Zarek. Su distribución fuera del sistema de intranet 
            constituye una violación de los protocolos de seguridad interna.</p>
            <div class="file-status">Estado del archivo: <span class="status-badge">VIGENTE</span></div>
        </div>
    </div>
    }

    <!-- Footer Quote -->
    <div class="profile-footer">
        <div class="footer-code">CONSOLA ADMIN DIMENSION-2 // MÓDULO PERFIL v2.4.1</div>
    </div>
</div>