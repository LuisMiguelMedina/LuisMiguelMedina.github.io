<div class="logs-container">
    <!-- Header -->
    <div class="logs-header">
        <div class="header-info">
            <div class="server-icon">
                <i class="fas fa-server"></i>
            </div>
            <div class="server-details">
                <h1 class="server-name">SIMULACIÓN DIMENSIÓN-21</h1>
                <div class="server-status">
                    <span class="status-dot online"></span>
                    <span>EN LÍNEA</span>
                    <span class="divider">|</span>
                    <span class="genesis">Fecha Simulada: {{ simulationDate }}</span>
                </div>
            </div>
        </div>

        <div class="header-actions">
            <button class="log-btn" [class.active]="autoScroll" (click)="toggleAutoScroll()">
                <i class="fas fa-arrow-down"></i>
                Auto-scroll
            </button>
            <button class="log-btn danger" (click)="clearLogs()">
                <i class="fas fa-trash"></i>
                Limpiar
            </button>
        </div>
    </div>

    <!-- Sub-menu tabs -->
    <div class="registros-tabs">
        <button class="tab-btn" [class.active]="activeTab === 'logs'" (click)="switchTab('logs')">
            <i class="fas fa-terminal"></i>
            Consola
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'bugs'" (click)="switchTab('bugs')">
            <i class="fas fa-bug"></i>
            Bugs
            <span class="bug-count">{{ bugs.length }}</span>
        </button>
    </div>

    <!-- Console Window -->
    @if (activeTab === 'logs') {
    <div class="console-window">
        <div class="console-header">
            <div class="console-controls">
                <span class="control-btn close"></span>
                <span class="control-btn minimize"></span>
                <span class="control-btn maximize"></span>
            </div>
            <span class="console-title">golden21_simulacion.log</span>
            <div class="console-stats">
                <span>{{ logs.length }} líneas | Ejecución: {{ serverUptime }}</span>
            </div>
        </div>

        <div class="console-body" #logContainer>
            @for (log of logs; track $index) {
            <div class="log-entry" [class]="'level-' + log.level.toLowerCase()">
                <span class="log-time">[{{ log.timestamp }}]</span>
                <span class="log-level">[{{ log.source }}/{{ log.level }}]:</span>
                <span class="log-message">{{ log.message }}</span>
            </div>
            }

            <div class="cursor-line">
                <span class="prompt">&gt;</span>
                <span class="cursor">_</span>
            </div>
        </div>
    </div>

    }

    <!-- Bugs Panel -->
    @if (activeTab === 'bugs') {
    <div class="bugs-panel">
        <div class="bugs-header-info">
            <i class="fas fa-bug"></i>
            <span>Reportes de bugs activos en la simulación de Dimensión-21</span>
        </div>

        <div class="bugs-list">
            @for (bug of bugs; track bug.id) {
            <div class="bug-card" [class]="'prioridad-' + bug.prioridad">
                <div class="bug-card-header">
                    <div class="bug-title-section">
                        <div class="bug-icon">
                            <i class="fas fa-bug"></i>
                        </div>
                        <div class="bug-title-info">
                            <h3 class="bug-titulo">{{ bug.titulo }}</h3>
                            <div class="bug-meta">
                                <span class="bug-id">{{ bug.id }}</span>
                                <span class="bug-fecha">{{ bug.fecha }}</span>
                                <span class="bug-fuente">[{{ bug.fuente }}]</span>
                            </div>
                        </div>
                    </div>
                    <div class="bug-badges">
                        <span class="bug-prioridad" [class]="'prioridad-' + bug.prioridad">
                            <i class="fas fa-exclamation-triangle"></i>
                            {{ getPrioridadLabel(bug.prioridad) }}
                        </span>
                        <span class="bug-estado" [class]="'estado-' + bug.estado">
                            {{ getEstadoLabel(bug.estado) }}
                        </span>
                    </div>
                </div>

                <p class="bug-descripcion">{{ bug.descripcion }}</p>

                <div class="bug-detalles">
                    <div class="detalles-header">
                        <i class="fas fa-file-alt"></i>
                        <span>Detalles de la investigación</span>
                    </div>
                    <p class="detalles-texto">{{ bug.detalles }}</p>
                </div>
            </div>
            }
        </div>
    </div>
    }

    <!-- Footer Stats -->
    <div class="logs-footer">
        <div class="stat-item uptime">
            <i class="fas fa-hourglass-half"></i>
            <span>Tiempo activo: {{ serverUptime }}</span>
        </div>
        <div class="stat-item">
            <i class="fas fa-calendar-alt"></i>
            <span>{{ simulationDate }}</span>
        </div>
        <div class="stat-item">
            <i class="fas fa-memory"></i>
            <span>Memoria: {{ memoryUsage }}</span>
        </div>
        <div class="stat-item">
            <i class="fas fa-chart-line"></i>
            <span>TPS: {{ tps }}</span>
        </div>
        <div class="stat-item">
            <i class="fas fa-users"></i>
            <span>Agentes: {{ playersOnline }}</span>
        </div>
    </div>
</div>